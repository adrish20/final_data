<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5G Network Failure Prediction</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .container { max-width: 500px; margin: 0 auto; padding: 20px; border: 1px solid #ccc; }
        input, button { width: 100%; padding: 10px; margin: 10px 0; }
    </style>
</head>
<body>

    <div class="container">
        <h2>5G Network Failure Prediction</h2>

        <button onclick="getNetworkInfo()">Get Network Information</button>
        <div id="network-details"></div>

        <button onclick="getPrediction()">Predict Network Failure</button>

        <div id="prediction-result"></div>
    </div>

    <script>
        let networkInfo = null;
        let lat = null;
        let lng = null;

        // Get network info using Network Information API
        function getNetworkInfo() {
            if ('connection' in navigator) {
                networkInfo = navigator.connection || navigator.mozConnection || navigator.webkitConnection;

                // Adjust for high downlink speeds, assuming 5G
                let networkType = networkInfo.effectiveType;
                if (networkInfo.downlink > 100) {
                    networkType = '5g';
                }

                // Display network info
                document.getElementById('network-details').innerHTML = 
                    `Network Type: ${networkType}, RTT: ${networkInfo.rtt}, Downlink: ${networkInfo.downlink}`;
            } else {
                alert('Network Information API not supported');
            }

            // Get user location (geolocation)
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    lat = position.coords.latitude;
                    lng = position.coords.longitude;
                });
            } else {
                alert('Geolocation API not supported');
            }
        }

        // Automatically detect network changes
        if ('connection' in navigator) {
            navigator.connection.addEventListener('change', getNetworkInfo);
        }

        // Send network data to the backend for prediction
        async function getPrediction() {
            const data = {
                network_type: networkInfo ? networkInfo.effectiveType : 'unknown',
                rtt: networkInfo ? networkInfo.rtt : 0,
                downlink: networkInfo ? networkInfo.downlink : 0,
                lat: lat,
                lng: lng
            };

            const response = await fetch('http://localhost:5000/predict', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });

            const result = await response.json();
            document.getElementById('prediction-result').innerHTML = `Prediction: ${result.prediction}`;
        }
    </script>

</body>
</html>
